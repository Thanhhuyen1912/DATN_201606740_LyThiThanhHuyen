@{
    ViewData["Title"] = "Đặt hàng";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@model List<CoreLib.DTO.ListDatHang>
<style>
    .order-summary img {
        width: 50px;
        height: 50px;
    }

    .form-select, .form-control {
        margin-bottom: 10px;
    }

    .btncapnhat {
        background-color: antiquewhite;
        color: black;
        padding: 5px;
        border-radius: 2px
    }
</style>
<div class="container mt-4" style="font-size: 15px">
    <div class="row mt-4">
        <!-- Thông tin người nhận -->
        <div class="col-md-5">
            <h5 style="font-size: 18px;font-weight: bold">Thông tin nhận hàng</h5>
            <div id="diaChiContainer">
                @if (Model != null)
                {
                    var datHang = Model[0]; // vì bạn truyền list chỉ có 1 phần tử
                    foreach (var diaChi in datHang.diachis)
                    {
                        <div class="border p-2 my-2 rounded" style="font-size: 15px">
                            <label class="w-100">
                                <input type="radio" name="MaDiaChi" value="@diaChi.MaDiaChi" />
                                <strong>@diaChi.HoTenNguoiNhan</strong> (@diaChi.SoDienThoaiNguoiNhan)<br />
                                @diaChi.ChiTiet, @diaChi.Xa, @diaChi.Huyen, @diaChi.ThanhPho
                            </label>
                        </div>
                    }
                }
                else
                {
                    <p>Không có địa chỉ nào!</p>
                }
            </div>
            <h5 style="font-size: 18px; font-weight: bold">Phương thức thanh toán</h5>
            <div id="diaChiContainer">
                @if (Model != null)
                {
                    var datHang = Model[0]; // vì bạn truyền list chỉ có 1 phần tử
                    foreach (var pt in datHang.phuongthucs)
                    {
                        <div class="border p-2 my-2 rounded">
                            <label class="w-100">
                                <input type="radio" name="MaPhuongThuc" value="@pt.MaPhuongThuc" />
                                <span>@pt.TenPhuongThuc</span>
                            </label>
                        </div>
                    }
                }
                else
                {
                    <p>Không có địa chỉ nào!</p>
                }
            </div>
            <a href="@Url.Action("Index", "GioHang")" style="color: gray" class="d-block mb-3 text-decoration-none">‹ Quay về giỏ hàng</a>
        </div>

        <!-- Tóm tắt đơn hàng -->
        <div class="col-md-7 order-summary">
            <h5 style="font-size: 18px;font-weight: bold">Đơn hàng</h5>
            <table style="font-size: 15px; width: 100%; border-collapse: collapse;">
                <tr style="border-bottom: 1px solid #ccc;">
                    <th style="text-align: left; padding: 8px;">Sản phẩm</th>
                    <th style="text-align: right; padding: 8px;">Giá</th>
                    <th style="text-align: center; padding: 8px;">Số lượng</th>
                    <th style="text-align: right; padding: 8px;">Tổng</th>
                </tr>

                @foreach (var sp in Model[0].sanphamhienthi)
                {
                    <tr style="border-bottom: 1px solid #eee;">
                        <td style="padding: 8px;">@sp.TenSanPham</td>
                        <td style="text-align: right; padding: 8px;">@sp.Gia.ToString("N0") đ</td>
                        <td style="text-align: center; padding: 8px;">@sp.soluong</td>
                        <td style="text-align: right; padding: 8px;">@(((decimal)(sp.soluong * sp.Gia)).ToString("N0")) đ</td>
                    </tr>
                }
            </table>

            <input type="text" class="form-control mb-2" placeholder="Nhập mã giảm giá">
            <div style="text-align:center">
            <button class="btn btncapnhat w-40 mb-3">Áp dụng</button>
            </div>
            <ul class="list-group mb-3">
                <li class="list-group-item d-flex justify-content-between">
                    <span>Tiền hàng</span><strong id="tien">@ViewBag.Tongtien.ToString("N0")</strong>
                </li>
                <li class="list-group-item d-flex justify-content-between">
                    <span>Phí vận chuyển</span><strong>30.000đ</strong>
                </li>
                <li class="list-group-item d-flex justify-content-between">
                    <strong>Thành tiền</strong><strong class="text-danger" id="thanhtien"></strong>
                </li>
            </ul>
            <div style="text-align:center">
            <button class="btn btncapnhat w-50">Đặt hàng</button>
            </div>
        </div>
    </div>
</div>
<script>

</script>
